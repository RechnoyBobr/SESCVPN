# SESCVPN
Данный учебный проект написан в качестве итогового проекта по НИС'у "Введение в облачные технологии". 

---

## Содержание
- [О нашем решении](#sol)
- [Инструкция по запуску](#ins)
- [О протоколе xray и используемых технологиях](#xray)
- [Архитектура решения](#arch)
- [Контакты](#contacts)
---
<h2 id="sol"> Наше решение </h2>
Наш проект задумывался, больше как эксперимент в котором мы применили самые инновационные протоколы проксирования для того, чтобы выяснить
В результате проекта была разработана IaaS платформа для упрощения создания обычного и реверс прокси. Всё решение состоит из веб сайта, прокси сервера и БД, для управления подключениями. На сайте можно получить конфигурацию для подключения прокси, причём для каждого клиента она будет отличаться.

<h2 id="ins">Инструкции по запуску</h2>
 <h3>Зависимости</h3>
Для запуска проекта необходимо установить <a target="_blank" href="https://docs.docker.com/engine/install/">docker</a> и <a target="_blank" href="https://docs.docker.com/compose/install/linux/#install-using-the-repository">docker-compose</a> и настроить их, как указано в гайде.
<h3>Инструкция</h3>
Для запуска проекта необходимо скачать репозиторий со страницы или склонировать репозиторий с командой git clone https://github.com/RechnoyBobr/sescvpn. <br>
После этого запустить сервис, также находясь в корне проекта командой docker-compose up -d. <br>
На 80 порту находится фронтенд сервис: http://localhost/ <br>
На 5050 порту находится pgAdmin для ручного управления БД: http://localhost:5050

<h2 id="xray">О xray и применяемых протоколах</h2>
  Xray-core является прокси сервером с поддержкой большинства протоколов проксирования. Он был разработан в Китае для борьбы с цензурированием контента, и постоянно развивался.
В данном проекте используется протокол проксирования <a href="https://github.com/XTLS/Xray-core/discussions/1295">xtls-rprx-vision</a>. 
Данный протокол является TLS прокси, и использует настоящее TLS соединение для шифрования.
Также для Transmission Control Protocol (TCP) Используется надстройка TCP-Reality, которая позволяет маскировать весь траффик под запросы к определенному серверу.
Reality нужен для того, так как в протоколе TLS первые 5 пакетов не зашифрованы и 3 пакетом определяется Server Name Identification (SNI).
Для этого Reality обращается к серверу, под который маскируется прокси, и получает его сертификат. В случае применения <a href="https://en.wikipedia.org/wiki/Network_mapping#Active_probing">активного пробирования</a> в TLS туннеле Reality отправит сертификат сайта, под который он маскируется.
Также, из-за того, что для шифрования используется обычное TLS соединение, то скорость передачи данных никак не падает, и ограничена лишь возможностями клиента и сервера.

<h2 id="arch">Архитектура</h2>
На данной диаграмме показана архитиектура сервиса. Рассмотрим, что будет происходит при отправке формы.
<img alt="architecture" src="./readme-assets/architecture.png">
1, 2. Пользователь отправляет форму. Формируется пост запрос и отправляется на бэкенд сервер <br>
3. С данными из формы пользователя формируется запрос в БД для проверки существования этого пользователя. В случае существования записи в БД, последующие шаги выполняться не будут. <br>
4. В противном случае, отправляется пост запрос на прокси сервер. <br>
5. С помощью bash скриптов генерируются конфигурации для xray-core и выполняется перезагрузка контейнера с xray-core. <br>
6. Генерируется конфигурация для пользователя и сохраняется в файл. После этого запускается скрипт на питоне. <br>
7. С помощью скрипта формируется ответ на пост запрос из 4 пункта и отправляется на сервер. <br>
8. Из полученной конфигурации в БД добавляется запись вида email/uuid, а сама конфигурация отправляется на фронтенд. <br>
9. Конфигурация появляется на веб-сайте

<h2 id="contacts">Контакты</h2>
В случае выявления каких-либо ошибок, открывайте Issue.<br>
Участники проекта:<br>
<ul>
<li>Щепеткин Илья: <a target="_blank" href="https://t.me/Bobsterrrrr">Telegram</a>, почта: zhao.94@mail.ru</li>
<li>Городецкий Егор: <a target="_blank" href="https://t.me/hochmuch">Telegram</a>, почта: egorrussian56@gmail.com </li>
</ul>
